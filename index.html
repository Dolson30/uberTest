<!DOCTYPE <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
</head>
<body>

    <button id="button">Get Prices</button>
    <button id="time">Get Times</button>
    <button id="location">CLick to show location</button>
    <script>
        let userLong;
        let userLat;

    $("#button").on('click',function () {
        console.log("in price function");
    // $.ajax({
    //     type: "GET",
    //     url: "https://api.uber.com/v1.2/estimates/price?start_latitude=37.7752315&start_longitude=-122.418075&end_latitude=37.7752415&end_longitude=-122.518075",
    //     contentType: "application/json",
    //     processData: false,
    //     headers: ("Authorization","Token=gyxrCkq-oUEznly0dtJ9nx2kXyWpN3hJoUEnsykL>"),
    //     success: function (json) {
    //         console.log(xml);
    //     }
    // });

    // jQuery.ajax({
    //         type: "GET",
    //         url: "https://api.uber.com/v1.2/estimates/price?start_latitude=37.7752315&start_longitude=-122.418075&end_latitude=37.7752415&end_longitude=-122.518075",
    //         beforeSend: function(xhr) {
                
    //             xhr.setRequestHeader("Authorization", "Token gyxrCkq-oUEznly0dtJ9nx2kXyWpN3hJoUEnsykL");
    //             xhr.setRequestHeader('Accept-Language', 'en_US'); 
    //             xhr.setRequestHeader('Content-Type', 'application/json');
    //             xhr.setRequestHeader("Access-Control-Allow-Headers","true");
                      
    //         },
    //         success: function(data){
    //            console.log(data);
    //         }
    //     });

    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       // Typical action to be performed when the document is ready:
       console.log(xhttp.responseText);
    }
};
xhttp.open('GET', 'https://api.uber.com/v1.2/estimates/price?start_latitude='+userLat+'&start_longitude='+userLong+'&end_latitude=33.8881&end_longitude=84.4706',true);
xhttp.setRequestHeader("Authorization", "Token gyxrCkq-oUEznly0dtJ9nx2kXyWpN3hJoUEnsykL");
xhttp.send();
    var body = xhttp.response;
    console.log(body);
});


$("#time").on('click',function () {

    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       // Typical action to be performed when the document is ready:
       console.log(xhttp.responseText);
    }
};
xhttp.open('GET', 'https://api.uber.com/v1.2/estimates/time?start_latitude='+userLat+'&start_longitude='+userLong,true);
xhttp.setRequestHeader("Authorization", "Token gyxrCkq-oUEznly0dtJ9nx2kXyWpN3hJoUEnsykL");
xhttp.send();
    var body = xhttp.response;
    console.log(body);
});


$("#location").on('click',function(){

    console.log("getting location")
    if (navigator.geolocation) 
    {
        navigator.geolocation.getCurrentPosition(showPosition);

    } 
    else 
    { 
        console.log("Geolocation is not supported by this browser.");
    }
});


function showPosition(position) {
 var pos = position;
  console.log( "Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude);
  console.log(pos);
    userLat = pos.coords.latitude;
    userLong = pos.coords.longitude;
    console.log(userLat);
    console.log(userLong);
}

    
    
    </script>
</body>
</html>